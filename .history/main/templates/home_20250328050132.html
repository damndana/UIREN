{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Home - Share Skill</title>
  <link href="https://fonts.googleapis.com/css2?family=DM+Sans&display=swap" rel="stylesheet" />
  <script src="https://unpkg.com/@lottiefiles/lottie-player@latest/dist/lottie-player.js"></script>
  <link rel="stylesheet" href="{% static 'css/style.css' %}" />
</head>
<body>

<nav class="navbar">
  <div class="nav-left">
    <a href="{% url 'home' %}">Home</a>
    <a href="{% url 'courses' %}">Courses</a>
    <div class="dropdown">
      <button class="dropbtn">Categories</button>
      <div class="dropdown-content">
        <a href="#">Design</a>
        <a href="#">Marketing</a>
        <a href="#">AI</a>
        <a href="#">Music</a>
      </div>
    </div>
  </div>
  <div class="nav-right">
    <a href="{% url 'about' %}">About Us</a>
    <a href="{% url 'signin' %}">Sign In</a>
  </div>
</nav>

<video autoplay muted loop id="bg-video">
  <source src="{% static 'videos/Background.mov' %}" type="video/mp4">
</video>

<section class="hero-content">
  <h1 class="hero-title">Share Skill, Get Skill</h1>

  <div class="search-wrapper">
    <input id="home-search" class="search-input" type="text" placeholder="Search here..." />
    <span class="search-icon"><img src="{% static 'animations/rocket (1).png' %}" alt="Search" /></span>
  </div>

  <div class="carousel-wrapper">
    <div class="carousel" id="home-carousel">
      <div class="card"><lottie-player src="{% static 'animations/webdev.json' %}" background="transparent" loop autoplay></lottie-player><p>Web Development</p></div>
      <div class="card"><lottie-player src="{% static 'animations/graphicdesign.json' %}" background="transparent" loop autoplay></lottie-player><p>Design</p></div>
      <div class="card"><lottie-player src="{% static 'animations/outbound-marketing.json' %}" background="transparent" loop autoplay></lottie-player><p>Marketing</p></div>
      <div class="card"><lottie-player src="{% static 'animations/AI.json' %}" background="transparent" loop autoplay></lottie-player><p>AI & ML</p></div>
      <div class="card"><lottie-player src="{% static 'animations/musician-in-studio.json' %}" background="transparent" loop autoplay></lottie-player><p>Music</p></div>
    </div>
  </div>
</section>

<script>
  // Infinite scroll
  const carousel = document.getElementById("home-carousel");
  const originalContent = carousel.innerHTML;
  carousel.innerHTML += originalContent;
  let scrollAmount = 0;

  function autoScroll() {
    scrollAmount += 2;
    carousel.scrollLeft = scrollAmount;
    if (scrollAmount >= carousel.scrollWidth / 2) scrollAmount = 0;
    requestAnimationFrame(autoScroll);
  }

  autoScroll();

  // Home search
  const homeSearch = document.getElementById("home-search");
  const homeCards = document.querySelectorAll("#home-carousel .card");

  homeSearch.addEventListener("input", () => {
    const query = homeSearch.value.toLowerCase();
    homeCards.forEach(card => {
      const title = card.querySelector("p").textContent.toLowerCase();
      card.style.display = title.includes(query) ? "flex" : "none";
    });
  });
</script>

</body>
</html>
